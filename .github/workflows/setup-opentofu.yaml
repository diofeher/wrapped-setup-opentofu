on: push

jobs:
  tofu-plan-apply:
    name: Tofu Plan and Apply
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6
      - name: Setup OpenTofu
        uses: opentofu/setup-opentofu@v1.0.6
        with:
          tofu_wrapper: false
      - name: Tofu Plan
        run: tofu plan -detailed-exitcode -no-color -out tfplan --
      - name: Tofu Apply
        run: tofu apply -auto-approve tfplan --
